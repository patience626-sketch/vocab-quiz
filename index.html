<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>單字測驗</title>

  <!-- 只載入樣式，不載入任何 tool / admin -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="bg">
    <div class="wrap">

      <!-- ===== 頂部列 ===== -->
      <header class="topbar card">
        <div class="brand">
          <div class="logo">Aa</div>
          <div>
            <div class="brandTitle">單字測驗</div>
            <div class="brandSub">看圖＋中文 → 點🔊聽發音 → 作答 → 顯示英文</div>
          </div>
        </div>

        <div class="topActions">
          <!-- 這裡只是「連結」，不會影響本頁 -->
          <a class="btn ghost" href="./admin.html" target="_blank">🔧 後台</a>
          <a class="btn ghost" href="./tool.html" target="_blank">📥 匯入</a>
        </div>
      </header>

      <!-- ===== 主內容 ===== -->
      <main class="layout">

        <!-- ===== 測驗卡 ===== -->
        <section class="card quizCard">

          <!-- 控制列 -->
          <div class="quizHeader">
            <div id="progress" class="progressPill">尚未開始</div>

            <div class="headerControls">
              <label class="chip">
                使用者
                <select id="kidSelect">
                  <option value="xigua">西瓜</option>
                  <option value="youzi">柚子</option>
                  <option value="xiaole">小樂</option>
                  <option value="apu">阿噗</option>
                  <option value="anan">安安</option>
                </select>
              </label>

              <label class="chip">
                題庫
                <select id="poolSelect">
                  <option value="all">全部</option>
                  <option value="new">新學 ⭐</option>
                  <option value="wrong">錯題本 ❗</option>
                </select>
              </label>

              <label class="chip">
                分類
                <select id="catSelect">
                  <option value="">全部</option>
                </select>
              </label>

              <label class="chip">
                題數
                <select id="numQuestions">
                  <option value="10">10</option>
                  <option value="15">15</option>
                  <option value="20" selected>20</option>
                  <option value="30">30</option>
                  <option value="50">50</option>
                </select>
              </label>

              <label class="chip">
                避開最近
                <select id="avoidDays">
                  <option value="0">不避開</option>
                  <option value="1">1 天</option>
                  <option value="3" selected>3 天</option>
                  <option value="5">5 天</option>
                </select>
              </label>

              <div class="btnRow">
                <button id="btnStart" class="btn primary">開始</button>
                <button id="btnReset" class="btn">重來</button>
              </div>
            </div>
          </div>

          <!-- 題目區 -->
          <div class="questionCard">

            <!-- 圖片 -->
            <div class="imgFrame">
              <img id="qImg" class="qImg" alt="" />
            </div>

            <!-- 文字 -->
            <div class="qBody">
              <div class="qTitleRow">
                <div>
                  <div class="qLabel">中文</div>
                  <div id="qZh" class="qZh">按「開始」出題</div>
                </div>
                <button id="btnSpeak" class="btn speak">🔊 發音</button>
              </div>

              <div class="qEnWrap">
                <div class="qLabel">英文</div>
                <div id="qEn" class="qEn hidden"></div>
              </div>

              <!-- 作答 -->
              <div class="answerBlock">
                <div class="answerTop">
                  <label class="chip">
                    作答方式
                    <select id="answerMode">
                      <option value="mc">選擇題</option>
                      <option value="type">輸入</option>
                    </select>
                  </label>
                  <div class="ruleHint">✔ 答對自動跳題｜✖ 答錯再按下一題</div>
                </div>

                <!-- 選擇題 -->
                <div id="mcArea" class="mcGrid"></div>

                <!-- 輸入題 -->
                <div id="typeArea" class="typeRow hidden">
                  <input id="typeInput" class="typeInput" placeholder="輸入英文" />
                  <button id="btnCheck" class="btn primary">送出</button>
                </div>

                <div id="result" class="result"></div>

                <div class="navRow">
                  <button id="btnNext" class="btn primary hidden">下一題</button>
                  <button id="btnShowEn" class="btn ghost hidden">顯示英文</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ===== 側邊統計 ===== -->
        <aside class="card sideCard">
          <div class="sideTitle">學習狀態</div>

          <div class="stats">
            <div class="stat">
              <div class="statName">本輪正確</div>
              <div id="statCorrect" class="statVal">0</div>
            </div>
            <div class="stat">
              <div class="statName">本輪錯誤</div>
              <div id="statWrong" class="statVal">0</div>
            </div>
            <div class="stat">
              <div class="statName">錯題本</div>
              <div id="statWrongBank" class="statVal">0</div>
            </div>
            <div class="stat">
              <div class="statName">新學</div>
              <div id="statNewBank" class="statVal">0</div>
            </div>
          </div>
        </aside>

      </main>

      <footer class="footer">
        測驗頁（index.html）｜工具在 tool.html｜後台在 admin.html
      </footer>
    </div>
  </div>

  <!-- ⚠️ 關鍵：只載入 app.js -->
  <script src="./app.js"></script>
</body>
</html>
